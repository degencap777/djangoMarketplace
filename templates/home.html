{% extends 'base_html.html' %}

{% block title %}Homepage - Splash{% endblock %}

{% block header %}
    {% include 'header_full.html' %}
{% endblock %}

{% block content %}

<div class="relative isolate w-full flex flex-col h-full grow xl:justify-center">
    <svg class="absolute inset-x-0 top-0 -z-10 h-full w-full stroke-gray-200 [mask-image:radial-gradient(32rem_32rem_at_center,white,transparent)]"
        aria-hidden="true">
        <defs>
            <pattern id="1f932ae7-37de-4c0a-a8b0-a6e3b4d44b84" width="200" height="200" x="50%" y="-1"
                patternUnits="userSpaceOnUse">
                <path d="M.5 200V.5H200" fill="none" />
            </pattern>
        </defs>
        <svg x="50%" y="-1" class="overflow-visible fill-gray-50">
            <path d="M-200 0h201v201h-201Z M600 0h201v201h-201Z M-400 600h201v201h-201Z M200 800h201v201h-201Z"
                stroke-width="0" />
        </svg>
        <rect width="100%" height="100%" stroke-width="0" fill="url(#1f932ae7-37de-4c0a-a8b0-a6e3b4d44b84)" />
    </svg>
    <div class="absolute left-1/2 right-0 top-0 -z-10 -ml-24 transform-gpu overflow-hidden blur-3xl lg:ml-24 xl:ml-48"
        aria-hidden="true">
        <div class="aspect-[801/1036] w-[50.0625rem] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30"
            style="clip-path: polygon(63.1% 29.5%, 100% 17.1%, 76.6% 3%, 48.4% 0%, 44.6% 4.7%, 54.5% 25.3%, 59.8% 49%, 55.2% 57.8%, 44.4% 57.2%, 27.8% 47.9%, 35.1% 81.5%, 0% 97.7%, 39.2% 100%, 35.2% 81.4%, 97.2% 52.8%, 63.1% 29.5%)">
        </div>
    </div>
    <div class="overflow-hidden">
        <div class="mx-auto w-full max-w-7xl pb-24 sm:pb-32 pt-4 sm:pt-20 sm:px-6 lg:px-0 xl:px-8 lg:pt-14">
            <div class="mx-auto max-w-2xl gap-x-14 lg:mx-0 lg:flex lg:max-w-none lg:items-center">
                <div class="w-full max-w-xl lg:shrink-0">
                    <h1 class="text-4xl font-bold tracking-tight text-gray-900 sm:text-6xl">Build Together.</h1>
                    <p class="relative mt-6 text-lg leading-8 text-gray-600 sm:max-w-md lg:max-w-none">Solve real-world
                        challenges
                        on open products. Build a rich, public portfolio of your work as a product manager, software
                        developer and
                        more.</p>
                    <div class="mt-10 flex flex-col sm:flex-row sm:items-center gap-y-4 sm:gap-y-0 sm:gap-x-6">
                        <a href="#"
                            class="rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center text-left w-fit">Get
                            Started as a Contributor</a>
                        <a href="{{ url('create-product') }}" class="text-sm font-semibold leading-6 text-gray-900">Add your product to OpenUnited
                            <span aria-hidden="true">â†’</span></a>
                    </div>
                </div>
                <div class="flex justify-end w-full h-[320px] sm:h-[340px] mt-10 lg:mt-0">
                    <iframe width="100%" height="100%" src="https://www.youtube.com/embed/h9MujYgW1mw"
                        title="YouTube video player" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>
</div>

{% if request.user.is_authenticated and not request.user.person.completed_profile %}
<div class="relative z-10" aria-labelledby="complete-profile-modal" role="dialog" aria-modal="true">
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

    <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
        <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
            <div
                class="relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6">
                <div>
                    <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100">
                        <svg class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                    </div>
                    <div class="mt-3 text-center sm:mt-5">
                        <h3 class="text-base font-semibold leading-6 text-gray-900" id="complete-profile-modal">One
                            Final Thing</h3>
                        <div class="mt-2">
                            <p class="text-sm text-gray-500">You haven't finished your profile. Without it, we cannot
                                match you with
                                the present challenges. Please click "Complete Profile" button to complete your profile.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3">
                    <div
                        class="inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 sm:col-start-2">
                        <a href="{{ url('profile', args=(request.user.person.pk,)) }}">
                            <button type="button">Complete
                                the profile</button>
                        </a>
                    </div>
                    <div
                        class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0">
                        <button type="button" id="skip-for-now-button">Skip
                            for now</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<script>
    const modal = document.querySelector("[aria-labelledby='complete-profile-modal']");
    const skipForNowButton = document.getElementById("skip-for-now-button");

    const transitionClasses = {
        show: {
            remove: ["hidden", "ease-in", "duration-200", "opacity-0"],
            add: ["ease-out", "duration-300", "opacity-100"],
        },
        hide: {
            remove: ["ease-out", "duration-300", "opacity-100"],
            add: ["hidden", "ease-in", "duration-200", "opacity-0"],
        },
    };

    function applyClasses(action) {
        const {
            remove,
            add
        } = transitionClasses[action];

        for (const className of add) {
            modal.classList.add(className);
        }

        for (const className of remove) {
            modal.classList.remove(className);
        }
    }

    function showModal() {
        applyClasses('show');
    }

    function hideModal() {
        applyClasses('hide');
    }

    skipForNowButton.addEventListener("click", hideModal);
</script>

{% endblock %}

{% block footer %}
    {% include 'footer.html' %}
{% endblock %}
